% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Module 4 - Instructions},
  pdfauthor={Oliver Engist},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi

\title{Module 4 - Instructions}
\author{Oliver Engist}
\date{04/04/2021}

\begin{document}
\maketitle

In the next assignment we want to replicate some plots from the paper
``Female Socialization: How Daughters Affect Their Legislator Fathers'
Voting on Women's Issues'' (Washington, 2008). The paper explores
whether having a daughter makes politicians more sensitive to women's
rights issues and how this is reflected in their voting behavior. The
main identifying assumption is that after controlling for the number of
children, the gender composition is random. This might be violated if
families that have a preference for girls keep having children until
they have a girl. In this assignment we will prepare a dataset that
allows us to test whether families engage in such a ``female child
stopping rule''.

\hypertarget{setup}{%
\section{Setup}\label{setup}}

\begin{itemize}
\tightlist
\item
  Load the libraries ``Rio'' and ``tidyverse''
\item
  Change the path of the working directory to your working directory.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(rio)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'rio' was built under R version 4.0.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'tidyverse' was built under R version 4.0.5
\end{verbatim}

\begin{verbatim}
## Warning: package 'ggplot2' was built under R version 4.0.5
\end{verbatim}

\begin{verbatim}
## Warning: package 'tibble' was built under R version 4.0.5
\end{verbatim}

\begin{verbatim}
## Warning: package 'tidyr' was built under R version 4.0.5
\end{verbatim}

\begin{verbatim}
## Warning: package 'readr' was built under R version 4.0.5
\end{verbatim}

\begin{verbatim}
## Warning: package 'purrr' was built under R version 4.0.5
\end{verbatim}

\begin{verbatim}
## Warning: package 'dplyr' was built under R version 4.0.5
\end{verbatim}

\begin{verbatim}
## Warning: package 'stringr' was built under R version 4.0.5
\end{verbatim}

\begin{verbatim}
## Warning: package 'forcats' was built under R version 4.0.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(magrittr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'magrittr' was built under R version 4.0.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Working directory is set in project settings}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  import the data sets \emph{basic.dta} and \emph{genold108.dta}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{basicData }\OtherTok{\textless{}{-}} \FunctionTok{import}\NormalTok{(}\StringTok{"./basic.dta"}\NormalTok{)}
\NormalTok{genoldData }\OtherTok{\textless{}{-}} \FunctionTok{import}\NormalTok{(}\StringTok{"./genold108.dta"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  create a subset of the 108th congress from the \emph{basic} dataset
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{basicData }\SpecialCharTok{\%\textless{}\textgreater{}\%} \FunctionTok{filter}\NormalTok{(congress }\SpecialCharTok{==} \StringTok{"108"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  join this subset with the \emph{genold} dataset
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# common id is name}
\NormalTok{combinedData }\OtherTok{\textless{}{-}} \FunctionTok{left\_join}\NormalTok{(basicData, genoldData, }\AttributeTok{by=}\StringTok{"name"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{data-preparation}{%
\section{Data preparation}\label{data-preparation}}

\begin{itemize}
\tightlist
\item
  check table 1 in the appendix of the paper and decide which variables
  are necessary for the analysis (check the footnote for control
  variables)
\item
  drop all other variables.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{glimpse}\NormalTok{(combinedData)   }\CommentTok{\#get overview of variables}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 435
## Columns: 64
## $ year        <chr> "2003-2004", "2003-2004", "2003-2004", "2003-2004", "2003-~
## $ congress    <dbl> 108, 108, 108, 108, 108, 108, 108, 108, 108, 108, 108, 108~
## $ party       <dbl> 1, 1, 2, 2, 1, 1, 1, 1, 2, 1, 2, 1, 1, 2, 2, 2, 2, 2, 2, 1~
## $ district.x  <dbl> 1, 5, 4, 2, 5, 1, 1, 43, 6, 3, 6, 1, 2, 10, 3, 6, 6, 2, 7,~
## $ statenam.x  <chr> "HAWAII", "NEW YOR", "ALABAMA", "MISSOUR", "LOUISIA", "MAI~
## $ name        <chr> "ABERCROMBIE, NEIL", "ACKERMAN, GARY L.", "ADERHOLT, ROBER~
## $ ngirls      <dbl> 0, 1, 1, 2, 2, 2, 2, 2, 2, 0, 1, 2, 0, 3, 1, 4, 2, 1, 1, 3~
## $ nboys       <dbl> 0, 2, 0, 4, 1, 0, 0, 2, 3, 0, 1, 1, 0, 0, 2, 6, 1, 1, 3, 0~
## $ totchi      <dbl> 0, 3, 1, 6, 3, 2, 2, 4, 5, 0, 2, 3, 0, 3, 3, 10, 3, 2, 4, ~
## $ anygirls    <dbl> 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1~
## $ propgirls   <dbl> 0.0000000, 0.3333333, 1.0000000, 0.3333333, 0.6666667, 1.0~
## $ rgroup      <dbl> 0, 4, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 2, 2~
## $ statabb     <chr> "HI", "NY", "AL", "MO", "LA", "ME", "NJ", "CA", "AL", "WA"~
## $ statalph    <dbl> 12, 33, 1, 26, 19, 20, 31, 5, 1, 48, 19, 34, 50, 34, 41, 2~
## $ region      <chr> "9", "2", "6", "4", "7", "1", "2", "9", "6", "9", "7", "5"~
## $ repub       <dbl> 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0~
## $ srvlng      <dbl> 13, 21, 7, 3, 1, 7, 13, 3, 11, 5, 17, 1, 5, 17, 1, 11, 19,~
## $ female      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0~
## $ white       <dbl> 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0~
## $ bday        <date> 1938-06-26, 1942-11-19, 1965-07-22, 1947-07-05, 1946-12-0~
## $ age         <dbl> 64, 60, 37, 55, 56, 57, 45, 55, 55, 46, 54, 60, 40, 76, 41~
## $ demvote     <dbl> 0.5868644, 0.6938987, 0.3812436, 0.4038657, 0.4113402, 0.5~
## $ medinc      <dbl> 25760, 27182, 20281, 30791, 18067, 22869, 27082, 20440, 27~
## $ perf        <dbl> 0.5049943, 0.5236615, 0.5204279, 0.5212265, 0.5253278, 0.5~
## $ perw        <dbl> 0.1858624, 0.5555022, 0.9159334, 0.9415647, 0.6401148, 0.9~
## $ perhs       <dbl> 0.8410435, 0.7785859, 0.6886524, 0.9081411, 0.7054539, 0.8~
## $ percol      <dbl> 0.28942156, 0.33563232, 0.11316687, 0.38301486, 0.15533009~
## $ perur       <dbl> 0.9930021, 1.0000000, 0.2654395, 0.9164996, 0.5291659, 0.4~
## $ alabort     <dbl> NA, 0.5688074, 0.2970711, 0.4362416, 0.1869919, NA, 0.5555~
## $ moreserv    <dbl> NA, 0.4726477, 0.5000000, 0.2671756, 0.3972603, NA, 0.3771~
## $ moredef     <dbl> NA, 0.1709234, 0.3140097, 0.2344828, 0.5051546, NA, 0.1647~
## $ morecrimesp <dbl> NA, 0.5885510, 0.5483871, 0.6092715, 0.7244095, NA, 0.5729~
## $ protgay     <dbl> NA, 0.7051282, 0.5343512, 0.6463414, 0.4936709, NA, 0.7071~
## $ dr1per      <dbl> NA, 0.30, 0.69, 0.56, 0.52, 0.58, 0.31, 0.33, 0.69, 0.39, ~
## $ dr2per      <dbl> NA, 0.38, 0.13, 0.19, 0.28, 0.24, 0.37, 0.32, 0.13, 0.20, ~
## $ dr3per      <dbl> NA, 0.00, 0.02, 0.02, 0.00, 0.02, 0.02, 0.02, 0.02, 0.04, ~
## $ dr4per      <dbl> NA, 0.12, 0.04, 0.02, 0.03, 0.03, 0.09, 0.08, 0.04, 0.05, ~
## $ dr5per      <dbl> NA, 0.19, 0.12, 0.21, 0.15, 0.20, 0.20, 0.25, 0.12, 0.31, ~
## $ aauw        <dbl> 88, 75, 0, 0, 50, 88, 100, 100, 0, 100, 0, 88, 100, 0, 0, ~
## $ rtl         <dbl> 0, 0, 100, 91, 100, 0, 0, 0, 100, 0, 100, 0, 0, 100, 91, 1~
## $ nowtot      <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now1        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now2        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now3        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now4        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now5        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now6        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now7        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now8        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now9        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now10       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now11       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now12       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now13       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now14       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now15       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now16       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now17       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now18       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now19       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ now20       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~
## $ district.y  <dbl> 1, 5, 4, 2, 5, 1, 1, 43, 6, 3, 6, 1, 2, 10, 3, 6, 6, 2, 7,~
## $ statenam.y  <chr> "HAWAII", "NEW YOR", "ALABAMA", "MISSOUR", "LOUISIA", "MAI~
## $ genold      <chr> "", "", "G", "B", "", "G", "G", "", "", "", "", "", "", "G~
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DataSelection }\OtherTok{\textless{}{-}} \FunctionTok{select}\NormalTok{(combinedData, name,genold,ngirls,totchi,party,white,female,age,srvlng,rgroup,region )}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\item
  Recode \emph{genold} such that gender is a factor variable and missing
  values are coded as NAs.
\item
  Recode \emph{party} as a factor with 3 levels (D, R, I)
\item
  Recode \emph{rgroup} and \emph{region} as factors.
\item
  generate variables for age squared and service length squared
\item
  create an additional variable of the number of children as factor
  variable
\end{itemize}

\hypertarget{replicationg-table-1-from-the-appendix}{%
\section{Replicationg Table 1 from the
Appendix}\label{replicationg-table-1-from-the-appendix}}

We haven't covered regressions in R yet. Use the function \emph{lm()}.
The function takes the regression model (formula) and the data as an
input. The model is written as \(y \sim x\), where \(x\) stands for any
linear combination of regressors (e.g.~\(y \sim x_1 + x_2 + female\)).
Use the help file to understand the function.

\begin{itemize}
\tightlist
\item
  Run the regression
  \(total.children = \beta_0 + \beta_1 gender.oldest + \gamma'X\) where
  \(\gamma\) stands for a vector of coefficients and \(X\) is a matrix
  that contains all columns that are control
  variables.\footnote{This is just a short notation instead of writing the full model with all control variables $totchi = \beta_0 + \beta_1 genold + \gamma_1 age + \gamma_2 age^2 + \gamma_3 Democrat + ... + \epsilon$ which quickly gets out of hand for large models.}
\item
  Save the main coefficient of interest (\(\beta_1\))
\item
  Run the same regression separately for Democrats and Republicans
  (assign the independent to one of the parties). Save the coefficient
  and standard error of \emph{genold}
\item
  Collect all the \emph{genold} coefficients from the six regressions,
  including their standard errors and arrange them in a table as in the
  paper.
\item
  print the table
\end{itemize}

\end{document}
